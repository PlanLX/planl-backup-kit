# PlanLX Elasticsearch Snapshot Kit - 环境变量配置示例
# 复制此文件为 .env 并根据您的环境修改相应的值
# cp env.example .env

# =============================================================================
# Elasticsearch 快照配置 (必需)
# =============================================================================

# 快照 Elasticsearch 集群地址 (多个地址用逗号分隔)
SNAPSHOT_HOSTS=http://elasticsearch:9200

# 快照集群认证 (可选)
SNAPSHOT_USERNAME=elastic
SNAPSHOT_PASSWORD=changeme

# 快照集群 SSL 证书验证 (true/false)
SNAPSHOT_VERIFY_CERTS=false

# 操作超时时间 (秒)
SNAPSHOT_TIMEOUT=300

# =============================================================================
# Elasticsearch 快照仓库配置 (必需)
# =============================================================================

# S3 存储库名称
ES_REPOSITORY_NAME=s3_backup

# 要快照的索引 (多个索引用逗号分隔，* 表示所有索引)
ES_INDICES=*

# 快照名称 (可选，如果不设置将自动生成)
ES_SNAPSHOT_NAME=

# 是否等待操作完成 (true/false)
ES_WAIT_FOR_COMPLETION=true

# =============================================================================
# AWS S3 配置 (必需)
# =============================================================================

# S3 存储桶名称
S3_BUCKET_NAME=your-elasticsearch-snapshots

# S3 基础路径 (快照在 S3 中的存储路径)
S3_BASE_PATH=elasticsearch-snapshots

# AWS 区域
S3_REGION=us-east-1

# S3 端点 (可选，用于自定义 S3 兼容服务)
S3_ENDPOINT=https://s3.amazonaws.com

# S3 协议 (http 或 https)
S3_PROTOCOL=https

# S3 路径样式访问 (true/false)
S3_PATH_STYLE_ACCESS=false

# S3 压缩 (true/false)
S3_COMPRESS=true

# =============================================================================
# AWS 凭证配置 (必需)
# =============================================================================

# AWS 访问密钥 ID
AWS_ACCESS_KEY_ID=your-access-key-id

# AWS 秘密访问密钥
AWS_SECRET_ACCESS_KEY=your-secret-access-key

# AWS 区域 (如果与 S3_REGION 不同)
AWS_REGION=us-east-1

# =============================================================================
# 快照轮转和清理配置 (可选)
# =============================================================================

# 最大快照数量
MAX_SNAPSHOTS=10

# 最大保留天数
MAX_AGE_DAYS=30

# 只保留成功的快照 (true/false)
KEEP_SUCCESSFUL_ONLY=true

# 启用自动轮转 (true/false)
ENABLE_ROTATION=false

# 清理旧快照 (true/false)
CLEANUP_OLD_SNAPSHOTS=true

# 快照保留天数
SNAPSHOT_RETENTION_DAYS=30

# 向后兼容字段
RETENTION_DAYS=30
RETENTION_COUNT=10

# =============================================================================
# 日志配置 (可选)
# =============================================================================

# 日志级别 (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# 日志格式 (json, text)
LOG_FORMAT=json

# =============================================================================
# 健康检查配置 (可选)
# =============================================================================

# 启用健康检查 (true/false)
HEALTH_CHECK_ENABLED=true

# 健康检查间隔 (秒)
HEALTH_CHECK_INTERVAL=30

# =============================================================================
# Elasticsearch 恢复配置 (仅恢复时使用)
# =============================================================================

# 恢复 Elasticsearch 集群地址 (多个地址用逗号分隔)
RESTORE_HOSTS=http://elasticsearch:9200

# 恢复集群认证 (可选)
RESTORE_USERNAME=elastic
RESTORE_PASSWORD=changeme

# 恢复集群 SSL 证书验证 (true/false)
RESTORE_VERIFY_CERTS=false

# 恢复时重命名模式
RESTORE_RENAME_PATTERN=

# 恢复时重命名替换
RESTORE_RENAME_REPLACEMENT=

# 忽略不可用索引 (true/false)
RESTORE_IGNORE_UNAVAILABLE=true

# 允许部分恢复 (true/false)
RESTORE_PARTIAL=false

# =============================================================================
# Docker Compose 专用配置
# =============================================================================

# Elasticsearch 密码 (用于 keystore)
ELASTIC_PASSWORD=changeme

# Elasticsearch keystore 密码
ES_KEYSTORE_PASS=changeme

# =============================================================================
# 使用说明
# =============================================================================
# 
# 1. 复制此文件为 .env:
#    cp env.example .env
#
# 2. 编辑 .env 文件，填入您的实际配置值
#
# 3. 在 Docker Compose 中使用:
#    docker-compose up es-snapshot-tool
#
# 4. 或者直接运行命令:
#    docker-compose run --rm es-snapshot-tool snapshot
#    docker-compose run --rm es-snapshot-tool restore <snapshot_name>
#    docker-compose run --rm es-snapshot-tool list-snapshots
#    docker-compose run --rm es-snapshot-tool rotate
#
# 5. 在 Kubernetes 中使用:
#    参考 example/ 目录中的配置文件
#
# 注意: 
# - 敏感信息如密码和密钥建议使用环境变量而不是配置文件
# - 生产环境中请使用强密码和适当的访问控制
# - 定期轮换 AWS 凭证和 Elasticsearch 密码 